using System;
using System.Collections.Generic;

namespace oopTask3
{
    internal class Program
    {
        static void Main(string[] args)
        {
            const string ShowInfoCommand = "1";
            const string BanPlayerCommand = "2";
            const string UnbanPlayerCommand = "3";
            const string DeletePlayerCommand = "4";

            List<Player> players = new List<Player> { new Player(1230, 14, "lox", false), new Player(4321, 22, "sas", false), new Player() };
            DataBase playerList = new DataBase(players);
            bool isOpen = true;
            string userInput = null;

            while (isOpen)
            {
                Console.Clear();
                Console.WriteLine($"{ShowInfoCommand} - показать информацию об игроках" +
                    $"\n{BanPlayerCommand} - забанить игрока\n{UnbanPlayerCommand} - разбанить игрока" +
                    $"\n{DeletePlayerCommand} - удалить игрока\n");
                userInput = Console.ReadLine();
                Console.Clear();

                switch (userInput)
                {
                    case ShowInfoCommand:
                        ShowPlayersInfo(players);
                        break;

                    case BanPlayerCommand:
                        playerList.Ban(players);
                        break;

                    case UnbanPlayerCommand:
                        playerList.Unban(players);
                        break;

                    case DeletePlayerCommand:
                        playerList.DeletePlayer(players);
                        break;

                    default:
                        Console.WriteLine("Команда введена неверно");
                        break;
                }

                Console.WriteLine("\nДля продолжения, нажмите любую клавишу...\n");
                Console.ReadKey();
            }
        }

        static void ShowPlayersInfo(List<Player> players)
        {
            for (int i = 0; i < players.Count; i++)
            {
                players[i].ShowInfo();
                Console.WriteLine();
            }
        }
    }

    public class Player
    {
        public int Id { get; private set; }
        public int Level { get; private set; }
        public string Name { get; private set; }
        public bool IsBanned { get; private set; }

        public Player()
        {
            Id = 1234;
            Level = 1;
            Name = "Nameless";
            IsBanned = false;
        }

        public Player(int id, int level, string name, bool isBanned)
        {
            Id = id;
            Level = level;
            Name = name;
            IsBanned = isBanned;
        }

        public void ShowInfo()
        {
            Console.WriteLine($"ID - {Id}\nLevel - {Level}\nName - {Name}\nIs Banned - {IsBanned}");
        }

        public void Ban()
        {
            IsBanned = true;
        }

        public void Unban()
        {
            IsBanned = false;
        }
    }

    public class DataBase
    {
        List<Player> Players = new List<Player>();

        public DataBase(List<Player> players)
        {
            Players = players;
        }

        public void Ban(List<Player> players)
        {
            int id = 0;
            Console.WriteLine("Введите id игрока\n");
            string userInput = Console.ReadLine();
            bool isBanSuccessful = false;

            if (int.TryParse(userInput, out id) == false)
            {
                Console.Clear();
                Console.WriteLine("ID игрока введён неверно");
            }
            else
            {
                for (int i = 0; i < players.Count; i++)
                {
                    if (players[i].Id == id)
                    {
                        if (players[i].IsBanned == false)
                        {
                            players[i].Ban();
                            isBanSuccessful = true;
                        }
                        else
                        {
                            Console.WriteLine($"\nИгрок с ID - {id} уже забанен");
                        }
                    
                        break;
                    }
                }

                if (isBanSuccessful)
                {
                    Console.WriteLine($"\nИгрок с ID - {id} забанен");
                }
                else
                {
                    Console.WriteLine($"\nНе удалось забанить игрока с ID - {id}");
                }
            }
        }

        public void Unban(List<Player> players)
        {
            int id = 0;
            Console.WriteLine("Введите id игрока\n");
            string userInput = Console.ReadLine();
            bool isUnbanSuccessful = false;

            if (int.TryParse(userInput, out id) == false)
            {
                Console.Clear();
                Console.WriteLine("ID игрока введён неверно");
            }
            else
            {
                for (int i = 0; i < players.Count; i++)
                {
                    if (players[i].Id == id)
                    {
                        if (players[i].IsBanned == true)
                        {
                            players[i].Unban();
                            isUnbanSuccessful = true;
                        }
                        else
                        {
                            Console.WriteLine($"Игрок с ID - {id} не забанен");
                        }

                        break;
                    }
                }

                if (isUnbanSuccessful)
                {
                    Console.WriteLine($"\nИгрок с ID - {id} разбанен");
                }
                else
                {
                    Console.WriteLine($"\nНе удалось разбанить игрока с ID - {id}");
                }
            }
        }

        public void DeletePlayer(List<Player> players)
        {
            int id = 0;
            Console.WriteLine("Введите id игрока\n");
            string userInput = Console.ReadLine();
            bool isDeleteSuccessful = false;

            if (int.TryParse(userInput, out id) == false)
            {
                Console.Clear();
                Console.WriteLine("ID игрока введён неверно");
            }
            else
            {
                for (int i = 0; i < players.Count; i++)
                {
                    if (players[i].Id == id)
                    {
                        players.RemoveAt(i);
                        isDeleteSuccessful = true;
                        break;
                    }
                }

                if (isDeleteSuccessful)
                {
                    Console.WriteLine($"\nИгрок с ID - {id} удалён");
                }
                else
                {
                    Console.WriteLine($"\nНе удалось удалить игрока с ID - {id}");
                }
            }
        }
    }
}
